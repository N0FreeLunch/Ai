# 코드리뷰

코드 리뷰란 동료의 검토를 통해 프로젝트에서 지정한 코딩 스타일의 불일치를 지적하거나, 인간의 코딩 실수를 방지하고, 서로의 코딩 스타일의 이해를 통해서 하나의 팀으로써 가능한 일관된 방향의 코딩 스타일을 견지해나가면서 프로젝트에 참여하는 서로가 코드에 대한 이해를 가져 누구 하나라도 코드를 부적절하게 짜는 것을 방지하기 위한 전략이다.

## 방대한 코드 리뷰량

AI의 등장이후 사람들의 코드 작성 속도가 빨라지고 이 때문에 코드리뷰를 하는 양이 굉장히 늘게 되었다. 사람이 작성해서 올리는 리뷰의 양이 늘어나는 만큼 내가 코드리뷰를 하는 시간이 늘어나는 문제점이 있기도 하다.

사람이 직접 한땀한땀 작성하던 시기와는 달리 코드 리뷰량이 많아지면서 개인 개발을 해야 할 시간을 코드 리뷰하는데 시간을 보내는 일이 생겼다. 이 때문에 코드 리뷰를 어느 정도 수준으로 해야하는지 전통적인 모든 코드를 다 읽고 이상한 부분을 지적하는 방식은 더 이상 유효하지 않다는 것을 알게 되었다.

## 전통적인 코드 리뷰

사람들이 코드를 작성해 온 것을 보면 정말 기본 중에 기본을 지키지 않는 코드가 많았다. 변수명이 이상하거나, 메소드명이 이상하거나, 객체지향 및 레이어에 대한 이해가 없어서 이상한 방식의 참조를 하는 등의 문제가 일어났다.

프레임워크 및 라이브러리가 제공하는 모든 기능을 다 알기는 어렵다. 그것을 아는 것도 힘이지만 더 중요한 것은 전체 구조 변경을 얼마나 최소화하여 개발할 수 있는 체계를 만들 수 있는가가 중요하다.

일은 어떻게든 진행해야 하기 때문에 마냥 코드 리뷰를 반려할 수는 없는 상황이며, 최저 이 정도라면 나중에 코드를 고치기는 해도, 이해할만한 수준이기 때문에 넘어갈 수 있으면 넘어가는 선에서 코드 리뷰가 진행 되었다.

완벽한 코드를 작성할 수 있는 것은 아니며, 70%~90% 정도 스타일 기준을 통과했다면 통과하는 방식을 사용해야 했다. 물론 팀원들의 실력이 높다면 이 기준을 좀 더 높이 잡을 수 있을 것이다.

이러한 문제 때문에 기술 부채를 만들지 않기 위해서 노력하려고 해도, 각 구성원 개개인의 의식적인 코드 개선의 의지가 없다면 기술 부채는 쌓일 수 밖에 없고, 대부분의 경우 비즈니스 문제를 해결하는 것이 코드의 개선 보다 우선하기 때문에 조금씩 기술 부채가 쌀일 수 밖에 없다.

그러나 기술 부채가 있더라도 추후 코드를 쌓아 올릴 때 빠른 수정을 할 수 있도록 작은 기술 부채만을 가질 수 있도록 만드는 것이 좋을 정도를 유지하기 위한 노력을 하던 것이 전통적인 코드 리뷰였다.

## 당면한 문제

진짜 자신이 고민하고 생각해서 코드 리뷰를 요청한 것인지, 그냥 AI에게 맡기고 동작만 검증하고 로직에 대해서 생각하고 검토한 것인지 알 수 없는 코드들이 리뷰로 올라오는지 의심스러운 코드들이 점점 더 많이 올라오기 시작했다.

AI로 만들어 동작만 확인한 코드의 로직을 리뷰어가 집중해서 해석해야 할까? 동작 확인을 했다면 그건 코드에 대한 책임을 다한 것일까? 무책임하다고 해야할까? 아니면 이 시대의 코드 리뷰는 바뀌어야 하는 걸까? 리뷰어는 이런 코드를 허용해야 할까? 이런 의문이 드는 상황이다.

이제는 AI로 코드를 작성하는 시대, AI에게 어떻게 코드를 작성할 것인지 구체적으로 지시를 하는 방법을 통해서 코딩 스타일을 일관되게 만들어 리뷰를 하는데 드는 인지 부하를 최대한 줄여야 한다.

## 설계와 개발자의 프라이드 문제

작성한 코드는 고치기 어렵다는 문제가 발생한다. 이 때문에 설계를 먼저 하고 설계를 검토할 필요성이 있는데 설계는 개발자들의 자존심을 건드리는 치명적인 부분이라서 나이의 상하 관계가 아니라면 섣불리 설계를 검토하자고 하기는 어렵다는 문제가 있다. 다양한 인재를 활용하기 위해서는 설계를 서로 검토하는 등의 수평적 관계를 만들 필요가 있다.

개발자들 간의 일방적인 관계가 아닌, 서로 다양한 아이디어를 토의하고 개발 철학과 방향성을 공유할 수 있는 방안을 마련하는 것이 중요하다. 하지만, 토의의 기본 자세나 지식이 안 되는 경우도 있는데 이런 경우에는 약간의 회사 차원에서 위계 관계를 부여할 수 있는 팀을 구성하는 편이 좋다.

## AI 시대의 코드 리뷰

코드 리뷰의 목적은 소프트웨어를 통제하고 관리하기 위함이다. 이제는 생성된 코드를 인간이 직접 리뷰하기에는 AI를 사용하여 생산한 코드의 속도를 인간이 감당할 수 없다. 이 때문에 인간이 소프트웨어의 통제를 효율적으로 할 수 있는 부분이 어디인지 알아야 한다. 이는 설계 부분으로 설계를 검토하여 소프트웨어를 좀 더 통제할 수 있는 방향으로 바꿔가는 것이 중요하다. 그리고 소프트웨어를 개발하는 개개인이 통제할 수 있는 방향으로 코드를 작성하고 있는지 검토할 능력이 있는지를 지속적으로 체크해야 한다.

정적 분석 또는 컴파일러의 구문 체크, 테스트 코드를 통해서 인간의 리뷰가 부족한 부분에 있어서 안정성을 채워줄 수 있는 선택을 해야 하며, 테스트 코드의 적절설을 평가할 수 있도록 교육을 해야 한다. 또한 추상화가 잘 된 코드를 관리할 수 있는 기업이라면 함수의 흐름과 함수의 조합 객체의 관계를 잘 구성하고 있는지 테스트하고 설명하도록 하는 방법이 훨씬 낫다고 본다. AI가 작성한 코드의 코드 흐름이 적절한 추상화를 통하고 있는지 판단하는 코드 리뷰를 해서 최소한의 코드 리뷰로 효과를 보는 방식을 채택해야 한다.

그리고 코드 리뷰도 현재 AI가 대신 해 주는 시대이기 때문에 상세한 로직에 대해서는 AI에게 맡기고, 각자가 AI의 리뷰를 대응하도록 하며, 사양 문서와 코드의 정합성을 AI에 검토를 지시, 사양서의 흐름과 테스트 코드의 BDD 적인 관점에서의 적절성을 평가하고, 세부적인 로직을 모두 확인하는 것을 생략하는 방법을 사용해야 한다고 본다.

모든 것을 확인하면 좋겠지만, 모든 것을 확인할 수 없는 시대이기 때문에 작은 수고로 시스템을 통제하는 전략을 생각해야 하므로 이런 방법을 쓸 수 밖에 없다고 본다.
